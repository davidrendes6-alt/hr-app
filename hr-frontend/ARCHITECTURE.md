# HR Application - Architecture Diagram

## ğŸ—ï¸ System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              CLIENT BROWSER                                  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                        React Frontend App                               â”‚ â”‚
â”‚  â”‚                      (http://localhost:5173)                            â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  Components:                                                             â”‚ â”‚
â”‚  â”‚  â€¢ Login Page           â€¢ Employee Directory                             â”‚ â”‚
â”‚  â”‚  â€¢ Profile Page         â€¢ Manager Dashboard                              â”‚ â”‚
â”‚  â”‚  â€¢ Coworker Profile     â€¢ Absence Request Form                           â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  State Management:                                                       â”‚ â”‚
â”‚  â”‚  â€¢ Zustand (Auth State)                                                  â”‚ â”‚
â”‚  â”‚  â€¢ Local Component State                                                 â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  HTTP Client:                                                            â”‚ â”‚
â”‚  â”‚  â€¢ Axios with Interceptors                                               â”‚ â”‚
â”‚  â”‚  â€¢ JWT Token in Headers                                                  â”‚ â”‚
â”‚  â”‚  â€¢ Auto-redirect on 401                                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â”‚ HTTP/REST API                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                            â”‚                             â”‚
        â–¼                            â–¼                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth Service     â”‚      â”‚   HR Service     â”‚         â”‚   AI Service     â”‚
â”‚  Port: 8001       â”‚      â”‚   Port: 8002     â”‚         â”‚   Port: 8003     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                            â”‚                             â”‚
        â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                  Internal API Call
        â”‚                                  (AI text polishing)
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Database       â”‚
â”‚   (Auth Data)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¡ API Communication Flow

### 1. Authentication Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Browser â”‚                    â”‚ Auth Service â”‚                 â”‚ Database â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                                â”‚                              â”‚
     â”‚  POST /auth/login              â”‚                              â”‚
     â”‚  { email, password }           â”‚                              â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                              â”‚
     â”‚                                â”‚                              â”‚
     â”‚                                â”‚  Verify Credentials          â”‚
     â”‚                                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                                â”‚                              â”‚
     â”‚                                â”‚  User Data                   â”‚
     â”‚                                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                                â”‚                              â”‚
     â”‚  { token, user }               â”‚                              â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                              â”‚
     â”‚                                â”‚                              â”‚
     â”‚  Store in localStorage         â”‚                              â”‚
     â”‚  â€¢ token                       â”‚                              â”‚
     â”‚  â€¢ user (JSON)                 â”‚                              â”‚
     â”‚                                â”‚                              â”‚
     â”‚                                â”‚                              â”‚
     â”‚  GET /auth/validate            â”‚                              â”‚
     â”‚  Header: Bearer <token>        â”‚                              â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                              â”‚
     â”‚                                â”‚                              â”‚
     â”‚                                â”‚  Validate JWT                â”‚
     â”‚                                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                                â”‚                              â”‚
     â”‚  200 OK (valid)                â”‚                              â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                              â”‚
     â”‚                                â”‚                              â”‚
```

### 2. Profile Management Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Browser â”‚                    â”‚ HR Service â”‚                 â”‚ Database â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                               â”‚                             â”‚
     â”‚  GET /profiles/me             â”‚                             â”‚
     â”‚  Header: Bearer <token>       â”‚                             â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚                               â”‚  Verify JWT & Get User ID   â”‚
     â”‚                               â”‚                             â”‚
     â”‚                               â”‚  Query Employee Profile     â”‚
     â”‚                               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                               â”‚                             â”‚
     â”‚                               â”‚  Full Profile (with salary, â”‚
     â”‚                               â”‚  phone, SSN, etc.)          â”‚
     â”‚                               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                               â”‚                             â”‚
     â”‚  { id, name, email, salary,   â”‚                             â”‚
     â”‚    phoneNumber, address,      â”‚                             â”‚
     â”‚    ssn, ... }                 â”‚                             â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚  GET /profiles/{id}           â”‚                             â”‚
     â”‚  (Regular Employee)           â”‚                             â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚                               â”‚  Check Role: employee       â”‚
     â”‚                               â”‚  Return Public Data Only    â”‚
     â”‚                               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                               â”‚                             â”‚
     â”‚  { id, name, email,           â”‚                             â”‚
     â”‚    department, position }     â”‚                             â”‚
     â”‚  (No sensitive data)          â”‚                             â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚  GET /profiles/{id}           â”‚                             â”‚
     â”‚  (Manager)                    â”‚                             â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚                               â”‚  Check Role: manager        â”‚
     â”‚                               â”‚  Return Full Profile        â”‚
     â”‚                               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                               â”‚                             â”‚
     â”‚  { id, name, email, salary,   â”‚                             â”‚
     â”‚    phoneNumber, address,      â”‚                             â”‚
     â”‚    ssn, ... }                 â”‚                             â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚  PUT /profiles/{id}           â”‚                             â”‚
     â”‚  { name, salary, ... }        â”‚                             â”‚
     â”‚  (Manager editing employee)   â”‚                             â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚                               â”‚  Verify Manager Permission  â”‚
     â”‚                               â”‚  Update Profile             â”‚
     â”‚                               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                               â”‚                             â”‚
     â”‚  Updated Profile              â”‚                             â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                             â”‚
     â”‚                               â”‚                             â”‚
```

### 3. Feedback System Flow (with AI Enhancement)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Browser â”‚           â”‚ HR Service â”‚           â”‚ AI Service â”‚           â”‚ Database â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                      â”‚                        â”‚                       â”‚
     â”‚  POST /profiles/{id}/feedback                â”‚                       â”‚
     â”‚  { content: "Great work!",                   â”‚                       â”‚
     â”‚    polishWithAI: true }                      â”‚                       â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                        â”‚                       â”‚
     â”‚                      â”‚                        â”‚                       â”‚
     â”‚                      â”‚  POST /polish          â”‚                       â”‚
     â”‚                      â”‚  { text: "Great work!" }                       â”‚
     â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
     â”‚                      â”‚                        â”‚                       â”‚
     â”‚                      â”‚                        â”‚  Call HuggingFace API â”‚
     â”‚                      â”‚                        â”‚  (Grammar/Tone Check) â”‚
     â”‚                      â”‚                        â”‚                       â”‚
     â”‚                      â”‚  { polishedText:       â”‚                       â”‚
     â”‚                      â”‚    "Excellent work!" } â”‚                       â”‚
     â”‚                      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚
     â”‚                      â”‚                        â”‚                       â”‚
     â”‚                      â”‚  Save Feedback         â”‚                       â”‚
     â”‚                      â”‚  with isPolished: true â”‚                       â”‚
     â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                      â”‚                        â”‚                       â”‚
     â”‚  { id, authorName,   â”‚                        â”‚                       â”‚
     â”‚    content: "Excellent work!",                â”‚                       â”‚
     â”‚    isPolished: true, â”‚                        â”‚                       â”‚
     â”‚    createdAt }       â”‚                        â”‚                       â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                        â”‚                       â”‚
     â”‚                      â”‚                        â”‚                       â”‚
     â”‚                      â”‚                        â”‚                       â”‚
     â”‚  POST /profiles/{id}/feedback                â”‚                       â”‚
     â”‚  { content: "Nice job",                      â”‚                       â”‚
     â”‚    polishWithAI: false }                     â”‚                       â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                        â”‚                       â”‚
     â”‚                      â”‚                        â”‚                       â”‚
     â”‚                      â”‚  Save Feedback         â”‚                       â”‚
     â”‚                      â”‚  (No AI call needed)   â”‚                       â”‚
     â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                      â”‚                        â”‚                       â”‚
     â”‚  { id, authorName,   â”‚                        â”‚                       â”‚
     â”‚    content: "Nice job",                       â”‚                       â”‚
     â”‚    isPolished: false,â”‚                        â”‚                       â”‚
     â”‚    createdAt }       â”‚                        â”‚                       â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                        â”‚                       â”‚
     â”‚                      â”‚                        â”‚                       â”‚
```

### 4. Absence Request Management Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Browser â”‚                    â”‚ HR Service â”‚                 â”‚ Database â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                               â”‚                             â”‚
     â”‚  POST /absences               â”‚                             â”‚
     â”‚  { startDate, endDate,        â”‚                             â”‚
     â”‚    reason }                   â”‚                             â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚                               â”‚  Create Absence Request     â”‚
     â”‚                               â”‚  status: "pending"          â”‚
     â”‚                               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                               â”‚                             â”‚
     â”‚  { id, employeeName,          â”‚                             â”‚
     â”‚    startDate, endDate,        â”‚                             â”‚
     â”‚    status: "pending" }        â”‚                             â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚  GET /absences/pending        â”‚                             â”‚
     â”‚  (Manager)                    â”‚                             â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚                               â”‚  Verify Manager Role        â”‚
     â”‚                               â”‚  Query Pending Requests     â”‚
     â”‚                               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                               â”‚                             â”‚
     â”‚  [{ id, employeeName,         â”‚                             â”‚
     â”‚     startDate, endDate,       â”‚                             â”‚
     â”‚     reason, status }]         â”‚                             â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚  PATCH /absences/{id}/approve â”‚                             â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚                               â”‚  Verify Manager Permission  â”‚
     â”‚                               â”‚  Update status: "approved"  â”‚
     â”‚                               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                               â”‚                             â”‚
     â”‚  200 OK                       â”‚                             â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚  PATCH /absences/{id}/reject  â”‚                             â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                             â”‚
     â”‚                               â”‚                             â”‚
     â”‚                               â”‚  Verify Manager Permission  â”‚
     â”‚                               â”‚  Update status: "rejected"  â”‚
     â”‚                               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                               â”‚                             â”‚
     â”‚  200 OK                       â”‚                             â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                             â”‚
     â”‚                               â”‚                             â”‚
```

## ğŸ” Security & Authorization

### JWT Token Flow
1. **Token Generation**: Auth service generates JWT on successful login
2. **Token Storage**: Frontend stores token in localStorage
3. **Token Usage**: All API requests include `Authorization: Bearer <token>` header
4. **Token Validation**: 
   - On app initialization: `GET /auth/validate`
   - On every API request: Services verify JWT signature and expiration
5. **Token Invalidation**: 401 responses trigger automatic logout and redirect

### Role-Based Access Control (RBAC)

| Endpoint | Employee | Manager |
|----------|----------|---------|
| `GET /profiles/me` | âœ… Own data | âœ… Own data |
| `GET /profiles/{id}` | âœ… Public data only | âœ… Full data |
| `PUT /profiles/{id}` | âœ… Own profile only | âœ… Any profile |
| `POST /profiles/{id}/feedback` | âœ… | âœ… |
| `GET /profiles` | âœ… | âœ… |
| `POST /absences` | âœ… | âœ… |
| `GET /absences/pending` | âŒ | âœ… |
| `PATCH /absences/{id}/approve` | âŒ | âœ… |
| `PATCH /absences/{id}/reject` | âŒ | âœ… |

## ğŸ“¦ Data Models

### User/Profile
```typescript
{
  id: string;
  name: string;
  email: string;
  role: "employee" | "manager";
  department?: string;
  position?: string;
  hireDate?: string;
  // Sensitive fields (owner + manager only)
  salary?: number;
  phoneNumber?: string;
  address?: string;
  emergencyContact?: string;
  ssn?: string; // Always masked in frontend
}
```

### Feedback
```typescript
{
  id: string;
  profileId: string;
  authorId: string;
  authorName: string;
  content: string;
  isPolished: boolean; // true if AI-enhanced
  createdAt: string;
}
```

### Absence Request
```typescript
{
  id: string;
  employeeId: string;
  employeeName: string;
  startDate: string;
  endDate: string;
  reason: string;
  status: "pending" | "approved" | "rejected";
  createdAt: string;
}
```

## ğŸ”„ Error Handling

### Frontend Error Handling
```
API Request Error
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Axios        â”‚
â”‚ Interceptor  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€ 401 Unauthorized
       â”‚    â””â”€> Clear localStorage
       â”‚        â””â”€> Redirect to /login
       â”‚
       â”œâ”€â”€â”€ 403 Forbidden
       â”‚    â””â”€> Show error message
       â”‚
       â”œâ”€â”€â”€ 404 Not Found
       â”‚    â””â”€> Show "Resource not found"
       â”‚
       â””â”€â”€â”€ 500 Server Error
            â””â”€> Show "Server error" message
```

### Backend Service Communication
- **Auth Service** â†” **HR Service**: JWT verification (HR validates tokens with Auth)
- **HR Service** â†” **AI Service**: Text polishing (synchronous HTTP call)
- All services use REST APIs with JSON payloads

## ğŸš€ Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Docker Network                        â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Frontend   â”‚  â”‚ Auth Service â”‚  â”‚  HR Service  â”‚  â”‚
â”‚  â”‚   :5173      â”‚  â”‚    :8001     â”‚  â”‚    :8002     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚  AI Service  â”‚                                        â”‚
â”‚  â”‚    :8003     â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Frontend State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Zustand (Global Auth State)           â”‚
â”‚  â€¢ user: User | null                            â”‚
â”‚  â€¢ token: string | null                         â”‚
â”‚  â€¢ isAuthenticated: boolean                     â”‚
â”‚  â€¢ login(), logout(), initializeAuth()          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ Used by
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          React Components                       â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   Navbar    â”‚  â”‚ PrivateRoute â”‚             â”‚
â”‚  â”‚ (user info) â”‚  â”‚  (auth check)â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                 â”‚
â”‚  Local State:                                   â”‚
â”‚  â€¢ Profile data                                 â”‚
â”‚  â€¢ Employee list                                â”‚
â”‚  â€¢ Feedback list                                â”‚
â”‚  â€¢ Absence requests                             â”‚
â”‚  â€¢ Form inputs                                  â”‚
â”‚  â€¢ Loading/error states                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Key Design Decisions

1. **Microservices Architecture**: Separate services for auth, HR, and AI concerns
2. **JWT Authentication**: Stateless authentication with token-based security
3. **Role-Based Access**: Backend enforces permissions, frontend adapts UI
4. **Service-to-Service**: HR service calls AI service internally (not from frontend)
5. **Lazy Token Validation**: Validate on app load + 401 interceptor for expired tokens
6. **localStorage**: Simple client-side storage for auth state (consider httpOnly cookies for production)
7. **REST APIs**: Synchronous HTTP/JSON communication between all services

---

**Architecture Version**: 1.0  
**Last Updated**: November 24, 2025
